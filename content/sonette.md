Title: J'ai hackÃ© ma sonette ! (ğŸ‡«ğŸ‡·)
Date: 2023-05-05

En tant que dÃ©veloppeur, la concentration et la focalisation sont cruciales pour accomplir les tÃ¢ches de maniÃ¨re efficace et efficiente. Malheureusement, travailler dans un environnement bruyant ou distrayant peut reprÃ©senter un dÃ©fi important pour atteindre une concentration optimale. C'est lÃ  que les casques antibruit sont utiles. Ils bloquent les sons externes et rÃ©duisent les distractions sonores.
Mais je travaille Ã©galement chez moi et je reÃ§ois souvent des livraisons, donc je n'entends pas la sonnette de la porte.

Du coup, j ai hackÃ© ma sonette !

## Objectifs

- Garder la solution sans fil
- ÃŠtre toujours averti par le son sur le recepteur
- ÃŠtre informÃ© par une notification sur le tÃ©lÃ©phone et l'ordinateur
- RÃ©soudre le problÃ¨me de dÃ©charge rapide de la batterie du tranmetter
- RÃ©aliser un projet avec un Raspberry Pi Pico et MicroPython :)

## Solutions

- Pirater le rÃ©cepteur RF :
  - Pirater le rÃ©cepteur RF pourrait Ãªtre la solution la plus facile, sauf que l'actuel Ã©metteur RF utilise une pile CRC2032.
  Cet Ã©metteur ne fonctionne pas bien si la pile est infÃ©rieure Ã  70% car la portÃ©e de transmission est trop faible et le rÃ©cepteur ne la reÃ§oit pas.

- Ã‰coute de la RF 433 Mhz :
  - Une autre solution pourrait consister Ã  Ã©couter la RF 433 Mhz, mais lÃ  encore, je dois modifier la puissance de l'Ã©metteur RF.

- Pirater l'Ã©metteur RF :
  - Le bouton est pull down to gnd lorsqu'il est enfoncÃ©.
  - L'Ã©metteur fonctionne bien avec une alimentation de 3,3 V.

  J'ai donc dÃ©cidÃ© de partir sur cette solution, ayant a ma disposition un mini paneau solaire, son chargeur, et un pico.


````
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚                                                                                â”‚
 â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
 â”‚   â”‚                                                                        â”‚   â”‚
 â”‚   â”‚        Button                                         CRC2032          â”‚   â”‚
 â”‚   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚   â”‚
 â”‚   â”‚     â”‚          â”‚                                   â”‚     -     â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚   â”‚     â”‚          â”‚                                   â”‚           â”‚       â”‚   â”‚                 â”‚
 â”‚   â”‚     â”‚          â”‚                                   â”‚           â”‚       â”‚   â”‚                 â”‚
 â”‚   â”‚     â”‚          â”‚                                   â”‚     +     â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
 â”‚   â”‚     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚   â”‚             â”‚   â”‚
 â”‚   â”‚          â”‚                                                             â”‚   â”‚             â”‚   â”‚
 â”‚   â”‚          â”‚                                                             â”‚   â”‚             â”‚   â”‚
 â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚             â”‚   â”‚
 â”‚              â”‚                                                                 â”‚             â”‚   â”‚
 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚
                â”‚                                                                               â”‚   â”‚
                â”‚                                                                               â”‚   â”‚
                â”‚                                                                               â”‚   â”‚
                â”‚       220 Ohms                                                                â”‚   â”‚
                â””â”€â”€â”€â”€â”€â”€â”€/\/\/\/â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
                                                                                          â”‚     â”‚   â”‚
                                                                                          â”‚     â”‚   â”‚
                                                                                          â”‚     â”‚   â”‚
                                                                                          â”‚     â”‚   â”‚
                                                                                          â”‚     â”‚   â”‚
                                                                                          â”‚     â”‚   â”‚
                                                                                          â”‚     â”‚   â”‚
                                                                                          â”‚     â”‚   â”‚
                                                                                          â”‚     â”‚   â”‚
                                                                                          â”‚     â”‚   â”‚
                                                                                          â”‚     â”‚   â”‚
                                                                                          â”‚     â”‚   â”‚
                                                                                          â”‚     â”‚   â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚     â”‚   â”‚
   â”‚                                                                                â”‚     â”‚     â”‚   â”‚
   â”‚                                                                                â”‚     â”‚     â”‚   â”‚
   â”‚                                                                                â”‚     â”‚     â”‚   â”‚
   â”‚                                                                                â”‚     â”‚     â”‚   â”‚
   â”‚                                                                                â”‚     â”‚     â”‚   â”‚
   â”‚                                     Raspberry Pico W                           â”‚     â”‚     â”‚   â”‚
   â”‚                                                                                â”‚     â”‚     â”‚   â”‚
   â”‚                                                                                â”‚     â”‚     â”‚   â”‚
   â”‚                                                                                â”‚     â”‚     â”‚   â”‚
   â”‚                                                                                â”‚     â”‚     â”‚   â”‚
   â”‚   VSYS GND      3.3V                                              PIN 17       â”‚     â”‚     â”‚   â”‚
   â”‚                                                                                â”‚     â”‚     â”‚   â”‚
   â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚     â”‚   â”‚
         â”‚   â”‚        â”‚                                                   â”‚               â”‚     â”‚   â”‚
         â”‚   â”‚        â”‚                                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
         â”‚   â”‚        â”‚                                                                         â”‚   â”‚
         â”‚   â”‚        â”‚                                                                         â”‚   â”‚
         â”‚   â”‚        â”‚                                                                         â”‚   â”‚
         â”‚   â”‚        â”‚                                                                         â”‚   â”‚
         â”‚   â”‚        â”‚                                                                         â”‚   â”‚
         â”‚   â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
         â”‚   â”‚                                                                                      â”‚
         â”‚   â”‚                                                                                      â”‚
         â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚   â”‚
         â”‚   â”‚G
         â”‚   â”‚
         â”‚   â”‚
         â”‚   â”‚
         â”‚   â”‚
         â”‚   â”‚
         â”‚   â”‚
         â”‚   â”‚
         â”‚   â”‚
         â”‚   â”‚
         â”‚   â”‚
         â”‚   â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Solaar Charger         â”‚               â”‚         Solaar Panel         â”‚
â”‚                                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              â”‚
â”‚                                â”‚               â”‚                              â”‚
â”‚                                â”‚               â”‚                              â”‚
â”‚                                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              â”‚
â”‚                                â”‚               â”‚                              â”‚
â”‚                                â”‚               â”‚                              â”‚
â”‚                                â”‚               â”‚                              â”‚
â”‚                                â”‚               â”‚                              â”‚
â”‚                                â”‚               â”‚                              â”‚
â”‚                                â”‚               â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚    â”‚
                         â”‚    â”‚                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                         â”‚    â”‚                  â”‚        Battery 18650         â”‚
                         â”‚    â”‚                  â”‚                              â”‚
                         â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              â”‚
                         â”‚                       â”‚                              â”‚
                         â”‚                       â”‚                              â”‚
                         â”‚                       â”‚                              â”‚
                         â”‚                       â”‚                              â”‚
                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              â”‚
                                                 â”‚                              â”‚
                                                 â”‚                              â”‚
                                                 â”‚                              â”‚
                                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

````

## Software

On va pas se mentir, monitorer un port GPIO, ce n'est pas la partie difficile. Le soucis est la consomation du RPI Pico. 21mA sans "deepsleep".
La methode deepsleep du port de micropython ne permettant pas d'etre reveillÃ© par un Interupt GPIO, j ai trouvÃ© cette lib qui le fait pour nous : https://github.com/tomjorquera/pico-micropython-lowpower-workaround .

Resultats :

- 21mA sans le mode "dormant"
- 0.06mA avec

Pour les notification j utilise ma propre instance auto hebergÃ© de gotify.

Source : https://github.com/brvier/sonette

## Picture

![Sonette](images/sonette.png)

